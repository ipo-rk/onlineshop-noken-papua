
function cartHandler() {
  return {
    products: [
      { name: 'Noken Kecil', price: 150000, image: 'assets/img/3.png', liked: false },
      { name: 'Noken Besar', price: 250000, image: 'assets/img/1.png' , liked: false},
      { name: 'Noken Rajutan', price: 200000, image: 'assets/img/4.png' , liked: false},
      { name: 'Noken Anyaman', price: 180000, image: 'assets/img/6.png' , liked: false}
    ],
    products2: [
      { name: 'Noken Kecil', price: 150000, image: 'assets/img/2.png' , liked: false},
      { name: 'Noken Besar', price: 250000, image: 'assets/img/4.png' , liked: false},
      { name: 'Noken Rajutan', price: 200000, image: 'assets/img/3.png' , liked: false},
      { name: 'Noken Anyaman', price: 180000, image: 'assets/img/6.png' , liked: false}
    ],
    products3: [
      { name: 'Noken Kecil', price: 150000, image: 'assets/img/2.png' , liked: false},
      { name: 'Noken Besar', price: 250000, image: 'assets/img/4.png' , liked: false},
      { name: 'Noken Rajutan', price: 200000, image: 'assets/img/3.png' , liked: false},
      { name: 'Noken Anyaman', price: 180000, image: 'assets/img/6.png' , liked: false}
    ],
    products4: [
      { name: 'Noken Kecil', price: 150000, image: 'assets/img/2.png' , liked: false},
      { name: 'Noken Besar', price: 250000, image: 'assets/img/4.png' , liked: false},
      { name: 'Noken Rajutan', price: 200000, image: 'assets/img/3.png' , liked: false},
      { name: 'Noken Anyaman', price: 180000, image: 'assets/img/6.png' , liked: false}
    ],
    products5: [
      { name: 'Noken Kecil', price: 150000, image: 'assets/img/2.png' , liked: false},
      { name: 'Noken Besar', price: 250000, image: 'assets/img/4.png' , liked: false},
      { name: 'Noken Rajutan', price: 200000, image: 'assets/img/3.png' , liked: false},
      { name: 'Noken Anyaman', price: 180000, image: 'assets/img/6.png' , liked: false}
    ],
    cart: [],
    showSidebar: false,
    get totalItems() {
      return this.cart.reduce((sum, item) => sum + item.qty, 0);
    },
    get totalPrice() {
      return this.cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
    },
    addToCart(product) {
      let existingProduct = this.cart.find(item => item.name === product.name);
      if (existingProduct) {
        existingProduct.qty++;
      } else {
        this.cart.push({ ...product, qty: 1 });
      }
      this.showSidebar = true;
    },
    increaseQty(product) {
      product.qty++;
    },
    decreaseQty(product) {
      if (product.qty > 1) {
        product.qty--;
      } else {
        this.cart = this.cart.filter(item => item.name !== product.name);
      }
    },
    checkout() {
      if (this.cart.length === 0) {
        alert("Keranjang kosong!");
        return;
      }
      alert("Checkout berhasil! Total: Rp " + this.totalPrice.toLocaleString());
      this.cart = [];
      this.showSidebar = false;
    },
    toggleSidebar() {
      this.showSidebar = !this.showSidebar;
    },
    closeSidebar() {
      this.showSidebar = false;
    }
  };
}