
function cartHandler() {
  return {
    products: [
      { name: 'Noken Kecil', price: 150000, diskon: 'Rp 300000', image: 'assets/img/rajutan-kulit-kayu/10.png', 
        descripton1:'Noken ini bisa di bawah kemana saja dan bisa digunakan untuk mengisi barang bawahan seperti buku, Dompet dan lainnya', liked: false },
      { name: 'Noken Kecil 2', price: 180000, diskon: 'Rp 350000', image: 'assets/img/rajutan-kulit-kayu/16.png' , 
        descripton2:'Noken ini bisa di bawah kemana saja dan bisa digunakan untuk mengisi barang bawahan seperti buku, Dompet dan lainnya', liked: false},
      { name: 'Noken Anyaman', price: 180000, diskon: 'Rp 350000', image: 'assets/img/rajutan-kulit-kayu/11.png' , 
        descripton3:'Noken ini bisa di bawah kemana saja dan bisa digunakan untuk mengisi barang bawahan seperti buku, Dompet dan lainnya', liked: false},
      { name: 'Noken Besar', price: 250000, diskon: 'Rp 400000', image: 'assets/img/rajutan-kulit-kayu/1.png' , 
        descripton4:'Noken ini bisa di bawah kemana saja dan bisa digunakan untuk mengisi barang bawahan seperti buku, Dompet dan lainnya', liked: false},
      { name: 'Noken Rajutan', price: 300000, diskon: 'Rp 450000', image: 'assets/img/rajutan-kulit-kayu/4.png' , 
        descripton5:'Noken ini bisa di bawah kemana saja dan bisa digunakan untuk mengisi barang bawahan seperti buku, Dompet dan lainnya', liked: false},
      { name: 'Noken Rotan 1', price: 350000, diskon: 'Rp 500000', image: 'assets/img/rajutan-kulit-kayu/12.png', 
        descripton6:'Noken ini bisa di bawah kemana saja dan bisa digunakan untuk mengisi barang bawahan seperti buku, Dompet dan lainnya', liked: false },
      { name: 'Noken Rotan 2', price: 400000, diskon: 'Rp 550000', image: 'assets/img/rajutan-kulit-kayu/13.png' , 
        descripton7:'Noken ini bisa di bawah kemana saja dan bisa digunakan untuk mengisi barang bawahan seperti buku, Dompet dan lainnya', liked: false},
      { name: 'Noken Rotan 3', price: 400000, diskon: 'Rp 550000', image: 'assets/img/rajutan-kulit-kayu/14.png' , 
        descripton8:'Noken ini bisa di bawah kemana saja dan bisa digunakan untuk mengisi barang bawahan seperti buku, Dompet dan lainnya', liked: false}
    ],

    products2: [
      { name: 'Noken Kecil', price: 150000, diskon: 'Rp 300000', image: 'assets/img/rajutan-benang/3.png', liked: false },
      { name: 'Noken Besar 1', price: 250000, diskon: 'Rp 400000', image: 'assets/img/rajutan-benang/5.png' , liked: false},
      { name: 'Noken Besar 2', price: 200000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/6.png' , liked: false},
      { name: 'Noken Anyaman', price: 180000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/7.png' , liked: false},
      { name: 'Noken Motiv PNG 1', price: 150000, diskon: 'Rp 300000', image: 'assets/img/rajutan-benang/8.png', liked: false },
      { name: 'Noken Motiv PNG 2', price: 250000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/9.png' , liked: false},
      { name: 'Noken Rajutan', price: 200000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/17.png' , liked: false},
      { name: 'Noken Rajutan', price: 200000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/18.png' , liked: false},
      { name: 'Noken Rajutan', price: 200000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/19.png' , liked: false},
      { name: 'Noken Rajutan', price: 200000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/22.png' , liked: false},
      { name: 'Noken Anyaman', price: 180000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/23.png' , liked: false}
    ],

    products3: [
      { name: 'Anting anting Bia', price: 150000, image: 'assets/img/aksesoris/2.png' , liked: false},
      { name: 'Koteka Coklat', price: 250000, image: 'assets/img/aksesoris/20.png' , liked: false},
      { name: 'Koteka Hitam', price: 200000, image: 'assets/img/aksesoris/21.png' , liked: false}
      // { name: 'Noken Anyaman', price: 180000, image: 'assets/img/aksesoris/6.png' , liked: false}
    ],

    
    
    // diskon: [
    //   { name: 'Noken Kecil', price: 150000, image: 'assets/img/2.png' , liked: false},
    //   { name: 'Noken Besar', price: 250000, image: 'assets/img/4.png' , liked: false},
    //   { name: 'Noken Rajutan', price: 200000, image: 'assets/img/3.png' , liked: false},
    //   { name: 'Noken Anyaman', price: 180000, image: 'assets/img/6.png' , liked: false}
    // ],
    // products5: [
    //   { name: 'Noken Kecil', price: 150000, image: 'assets/img/2.png' , liked: false},
    //   { name: 'Noken Besar', price: 250000, image: 'assets/img/4.png' , liked: false},
    //   { name: 'Noken Rajutan', price: 200000, image: 'assets/img/3.png' , liked: false},
    //   { name: 'Noken Anyaman', price: 180000, image: 'assets/img/6.png' , liked: false}
    // ],

    // product Menu start



    // product Menu end


    cart: [],
    showSidebar: false,
    get totalItems() {
      return this.cart.reduce((sum, item) => sum + item.qty, 0);
    },
    get totalPrice() {
      return this.cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
    },
     
      addToCart(product) {
        const found = this.cart.find(p => p.name === product.name);
        if(found){
          found.qty++;
        } else {
          this.cart.push({...product, qty: 1});
        }
      },

    // addToCart(product) {
    //   let existingProduct = this.cart.find(item => item.name === product.name);
    //   if (existingProduct) {
    //     existingProduct.qty++;
    //   } else {
    //     this.cart.push({ ...product, qty: 1 });
    //   }
    //   // this.showSidebar = true;
    // },
    increaseQty(product) {
      product.qty++;
    },
    decreaseQty(product) {
      if (product.qty > 1) {
        product.qty--;
      } else {
        this.cart = this.cart.filter(item => item.name !== product.name);
      }
    },
    checkout() {
      if (this.cart.length === 0) {
        alert("Keranjang belanja masih kosong!");
        return;
      }
    
      let message = "*Halo! Saya ingin order produk berikut:*\n\n";
    
      this.cart.forEach(item => {
        message += `â€¢ ${item.name} x ${item.qty} = Rp ${ (item.price * item.qty).toLocaleString() }\n`;
      });
    
      message += `\n*Total Barang:* ${this.totalItems}`;
      message += `\n*Total Harga:* Rp ${this.totalPrice.toLocaleString()}`;
    
      const encodedMessage = encodeURIComponent(message);
      const phoneNumber = "6281215376865"; // Ganti dengan nomor WA kamu
      const waUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
    
      alert("Checkout berhasil! Total: Rp " + this.totalPrice.toLocaleString());
      
      // Reset keranjang & tutup sidebar
      this.cart = [];
      this.showSidebar = false;
    
      // Buka WhatsApp di tab baru
      window.open(waUrl, "_blank");
    },
    

    
    toggleSidebar() {
      this.showSidebar = !this.showSidebar;
    },
    closeSidebar() {
      this.showSidebar = false;
    }
  };
}