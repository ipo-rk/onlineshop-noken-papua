function cartHandler() {
  return {
    products: [
      { name: 'Noken Kecil', price: 150000, diskon: 'Rp 300000', image: 'assets/img/rajutan-kulit-kayu/10.png', descriptions:'Rajutan Kulit Kayu', category:'filter-staters', liked: false, inCart: false },
      { name: 'Noken Kecil 2', price: 180000, diskon: 'Rp 350000', image: 'assets/img/rajutan-kulit-kayu/16.png' , descriptions:'Rajutan Kulit Kayu', category:'filter-staters', liked: false, inCart: false },
      { name: 'Noken Anyaman', price: 180000, diskon: 'Rp 350000', image: 'assets/img/rajutan-kulit-kayu/11.png' , descriptions:'Rajutan Kulit Kayu', category:'filter-staters', liked: false, inCart: false },
      { name: 'Noken Besar', price: 250000, diskon: 'Rp 400000', image: 'assets/img/rajutan-kulit-kayu/1.png' , descriptions:'Rajutan Kulit Kayu', category:'filter-staters', liked: false, inCart: false },
      { name: 'Noken Rajutan', price: 300000, diskon: 'Rp 450000', image: 'assets/img/rajutan-kulit-kayu/4.png' , descriptions:'Rajutan Kulit Kayu', category:'filter-staters', liked: false, inCart: false },
      { name: 'Noken Rotan 1', price: 350000, diskon: 'Rp 500000', image: 'assets/img/rajutan-kulit-kayu/12.png', descriptions:'Rajutan Kulit Kayu', category:'filter-staters', liked: false, inCart: false },
      { name: 'Noken Rotan 2', price: 400000, diskon: 'Rp 550000', image: 'assets/img/rajutan-kulit-kayu/13.png' , descriptions:'Rajutan Kulit Kayu', category:'filter-staters', liked: false, inCart: false },
      { name: 'Noken Rotan 3', price: 400000, diskon: 'Rp 550000', image: 'assets/img/rajutan-kulit-kayu/14.png' , descriptions:'Rajutan Kulit Kayu', category:'filter-staters', liked: false, inCart: false }
    ],
    products2: [
      { name: 'Noken Kecil', price: 150000, diskon: 'Rp 300000', image: 'assets/img/rajutan-benang/3.png', descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false },
      { name: 'Noken Besar 1', price: 250000, diskon: 'Rp 400000', image: 'assets/img/rajutan-benang/5.png' , descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false },
      { name: 'Noken Besar 2', price: 200000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/6.png' , descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false },
      { name: 'Noken Anyaman', price: 180000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/7.png' , descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false },
      { name: 'Noken Motiv PNG 1', price: 150000, diskon: 'Rp 300000', image: 'assets/img/rajutan-benang/8.png', descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false },
      { name: 'Noken Motiv PNG 2', price: 250000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/9.png' , descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false },
      { name: 'Noken Rajutan', price: 200000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/17.png' , descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false },
      { name: 'Noken Rajutan', price: 200000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/18.png' , descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false },
      { name: 'Noken Rajutan', price: 200000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/19.png' , descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false },
      { name: 'Noken Rajutan', price: 200000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/22.png' , descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false },
      { name: 'Noken Anyaman', price: 180000, diskon: 'Rp 350000', image: 'assets/img/rajutan-benang/23.png' , descriptions:'Rajutan Benang', category:'filter-salads', liked: false, inCart: false }
    ],
    products3: [
      { name: 'Anting anting Bia', price: 150000, image: 'assets/img/aksesoris/2.png', descriptions:'Aksesoris', category:'filter-specialty', liked: false, inCart: false },
      { name: 'Koteka Coklat', price: 250000, image: 'assets/img/aksesoris/20.png' , descriptions:'Aksesoris', category:'filter-specialty', liked: false, inCart: false },
      { name: 'Koteka Hitam', price: 200000, image: 'assets/img/aksesoris/21.png' , descriptions:'Aksesoris', category:'filter-specialty', liked: false, inCart: false }
    ],
    cart: [],
    showSidebar: false,
    showForm: false,  // Tampilkan form input
    customerData: {
      name: '',
      address: '',
      email: ''
    },

    get totalItems() {
      return this.cart.reduce((sum, item) => sum + item.qty, 0);
    },
    get totalPrice() {
      return this.cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
    },

    addToCart(product) {
      const found = this.cart.find(p => p.name === product.name);
      if (found) {
        found.qty++;
      } else {
        this.cart.push({ ...product, qty: 1 });
      }
    },

    increaseQty(product) {
      product.qty++;
    },
    decreaseQty(product) {
      if (product.qty > 1) {
        product.qty--;
      } else {
        this.cart = this.cart.filter(item => item.name !== product.name);
      }
    },

    checkout() {
      if (this.cart.length === 0) {
        alert("Keranjang belanja masih kosong!");
        return;
      }
      this.showForm = true;  // Tampilkan form input data diri
    },

    submitOrder() {
      if (!this.customerData.name || !this.customerData.address || !this.customerData.email) {
        alert("Harap lengkapi semua data diri terlebih dahulu.");
        return;
      }

      let message = "*Halo! Saya ingin order produk berikut:*\n\n";
      this.cart.forEach(item => {
        message += `â€¢ ${item.name} x ${item.qty} = Rp ${ (item.price * item.qty).toLocaleString() }\n`;
      });

      message += `\n*Total Barang:* ${this.totalItems}`;
      message += `\n*Total Harga:* Rp ${this.totalPrice.toLocaleString()}`;

      message += `\n\n*Data Diri:*`;
      message += `\nNama: ${this.customerData.name}`;
      message += `\nAlamat: ${this.customerData.address}`;
      message += `\nEmail: ${this.customerData.email}`;

      const encodedMessage = encodeURIComponent(message);
      const phoneNumber = "6281215376865"; // Ganti dengan nomor WA kamu
      const waUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;

      alert("Checkout berhasil! Total: Rp " + this.totalPrice.toLocaleString());

      // Reset keranjang & sidebar
      this.cart = [];
      this.showSidebar = false;
      this.showForm = false;

      // Buka WhatsApp
      window.open(waUrl, "_blank");
    },

    toggleSidebar() {
      this.showSidebar = !this.showSidebar;
    },
    closeSidebar() {
      this.showSidebar = false;
    }
  };
}
